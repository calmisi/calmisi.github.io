---
title: VMware中Mac os X虚拟机调整磁盘大小
date: 2016-11-07 15:27:50
tags: 
- Vmware
- Macos
categories: LuanQiBaZao
---

今天想起来之前编的一个补实验室QA的iphone app还有些功能没开发完。
打开了很久没用的macos虚拟机，发现XCODE有更新。
果断准备先更新一波。
结果提示我磁盘空间不足。
我用`df -hl`看了下，
总共有40G，已经用了30G，结果还提示我磁盘空间不足。
看了Xcode真是个大家伙。
没办法，只能给虚拟机扩容啦。
<!-- more -->

关闭虚拟机后，在对应的磁盘管理里，我扩展到了100G。
然后重新开机。
结果发现os 10.10以上的版本出现了PCI外置磁盘大小通过`磁盘工具`无法扩展的问题。

---

**具体的效果就是：**
可以在磁盘工具中看到对应的磁盘已经扩展到目标大小（100G）,但是不能进行分区，其中唯一一个Mac os X分区也不能进行抹掉和扩展操作。  
原因很简单，这是盘是系统盘，所以不能在系统运行的时候进行操作。  
但是VMware又进不了MacOsX的恢复分区，那怎么办咯。 

---

百度了一下，就搜到方法了：`diskutil`
MacOsX有一个diskutil命令。

# 具体步骤
1. 打开终端，输入`diskuitil list`;
{% asset_img 1.png%}

2. 从显示的列表中找到你需要扩展的分区。
如上图，磁盘总共有107.4G，但是系统分区只有42.1G。

3. 输入`diskutil resizeVolume disk0s2 100GB`
其中disk0s2为对应分区的ID,100GB为目标大小（注意不要超过磁盘的总大小）。
然后安静的等待一会就好啦。
